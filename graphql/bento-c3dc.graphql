type Adverse_Events_Table {
  AGE_AT_AE: Float
  DISEASE_PHASE: String
  DISEASE_PHASE_NUMBER: Float
  COURSE: String
  COURSE_NUMBER: Float
  ADVERSE_EVENT: String
  AE_CODE: String
  AE_SYSTEM: String
  AE_SYSTEM_VERSION: String
  AE_GRADE: String
  AE_ATTRIBUTION: String
  AE_OUTCOME: String
  AE_ICU: String
  AE_MEDICATION: String
  AE_INTERVENTION: String
  AE_MED_INTERVENTION_DETAIL: String
  AE_PATHOGEN: String
  AE_PATHOGEN_CONFIRMATION: String
  GVHD_ACUITY: String
  GVHD_ORGAN: String
  AGE_AT_AE_RESOLVED: Float
  AVN_JOINT: String
  AVN_JOINT_LATERALITY: String
  AVN_METHOD: String
  ORTHOPEDIC_PROCEDURE: String
  INFECTION_CLASSIFICATION: String
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type Biopsy_Surgical_Procedures_Table {
  AGE_AT_PROCEDURE: Float
  DISEASE_PHASE: String
  DISEASE_PHASE_NUMBER: Float
  COURSE: String
  COURSE_NUMBER: Float
  TUMOR_CLASSIFICATION: String
  TUMOR_TISSUE_TYPE: String
  PROCEDURE_SITE: String
  PROCEDURE_LATERALITY: String
  PROCEDURE_TYPE: String
  SURGERY_TYPE_LIMB: String
  AMPUTATION_TYPE: String
  SURGERY_TYPE_LIMB_SALVAGE: String
  RECONSTRUCTION_TYPE: String
  PROCEDURE_EXTENT: String
  MARGINS: String
  BIOPSY_TYPE: String
  MET_NON_LUNG_MGMT: String
  MET_LUNG_MGMT: String
  LOCALIZATION_TECHNIQUE: String
  Biopsy: String
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type Cellular_Immunotherapy_Table {
  AGE_AT_IMT_START: Float
  DISEASE_PHASE: String
  DISEASE_PHASE_NUMBER: Float
  COURSE: String
  COURSE_NUMBER: Float
  IMT_TYPE: String
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type Concomitant_Medications_Table {
  AGE_AT_MEDICATION_START: Float
  AGE_AT_MEDICATION_END: Float
  DISEASE_PHASE: String
  DISEASE_PHASE_NUMBER: Float
  COURSE: String
  COURSE_NUMBER: Float
  MEDICATION: String
  MEDICATION_ADMN_STATUS: String
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type Course_Timing_Table {
  COURSE: String
  COURSE_NUMBER: Float
  AGE_AT_COURSE_START: Float
  AGE_AT_COURSE_END: Float
  AGE_AT_COURSE_ANC_500: Float
  AGE_AT_TXASSIGN: Float
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type Cytology_Table {
  AGE_AT_CYTOLOGY: Float
  DISEASE_PHASE: String
  DISEASE_PHASE_NUMBER: Float
  MALIGNANT_CELLS: String
  CYTOLOGY_SPEC_TYPE: String
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type Demographics_Table {
  SEX: String
  RACE: String
  ETHNICITY: String
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type Disease_Characteristics_Table {
  DISEASE_PHASE: String
  DISEASE_PHASE_NUMBER: Float
  FAB_TYPE: String
  WHO_AML: String
  DETECTION_METHOD: String
  DISEASE_SITE: String
  CNS_DISEASE_STATUS: String
  MPAL: String
  MLDS: String
  TAMDS: String
  SECONDARY_AML: String
  LANSKY: String
  KARNOFSKY: String
  GPOH_SCORE: String
  IGCCC_RISK_GROUP: String
  MAGIC_RISK_GROUP: String
  ALL_TYPE: String
  HIST_ICD_O_MORPH: String
  BULK_MED_MASS: String
  PRIOR_STEROIDS_WEEK: String
  PRIOR_STEROIDS_MONTH: String
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type Disease_Phase_Timing_Table {
  DISEASE_PHASE: String
  DISEASE_PHASE_NUMBER: Float
  AGE_AT_DISEASE_PHASE: Float
  YEAR_AT_DISEASE_PHASE: Float
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type Echocardiogram_Table {
  AGE_AT_ECHO: Float
  DISEASE_PHASE: String
  DISEASE_PHASE_NUMBER: Float
  COURSE: String
  COURSE_NUMBER: Float
  ECHO_TEST: String
  ECHO_RESULT: String
  ECHO_RESULT_NUMERIC: Float
  ECHO_RESULT_UNIT: String
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type File {
  FILE_NAME: String
  FILE_TYPE: String
  FILE_DESCRIPTION: String
  FILE_FORMAT: String
  FILE_SIZE: String
  MD5SUM: String
  FILE_STATUS: String
  UUID: String
  FILE_LOCATION: String
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type Growing_Teratoma_Syndrome_Table {
  AGE_AT_GTS: String
  DISEASE_PHASE: String
  DISEASE_PHASE_NUMBER: Float
  GTS_TREATMENT: String
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type Histology_Table {
  AGE_AT_HIST_ASSESSMENT: Float
  DISEASE_PHASE: String
  DISEASE_PHASE_NUMBER: Float
  COURSE: String
  COURSE_NUMBER: Float
  HISTOLOGY: String
  HIST_ASSESSMENT_REVIEW: String
  HISTOLOGY_RESULT: String
  HISTOLOGY_RESULT_NUMERIC: Float
  HISTOLOGY_RESULT_UNIT: String
  HIST_ICD_O_MORPH: String
  HISTOLOGY_GRADE: String
  MATURE_GLIAL_IMPLANTS: String
  SOMATIC_MALIGNANCY_TYPE: String
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type Immunohistochemistry_Table {
  AGE_AT_IHC: Float
  DISEASE_PHASE: String
  DISEASE_PHASE_NUMBER: Float
  COURSE: String
  COURSE_NUMBER: Float
  IHC_TEST: String
  IHC_RESULT: String
  IHC_RESULT_NUMERIC: Float
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type Labs_Table {
  AGE_AT_LAB: Float
  DISEASE_PHASE: String
  DISEASE_PHASE_NUMBER: Float
  COURSE: String
  COURSE_NUMBER: Float
  LAB_CAT: String
  LAB_TEST: String
  LAB_SPEC_TYPE: String
  LAB_RESULT: String
  LAB_RESULT_NUMERIC: Float
  LAB_RESULT_UNIT: String
  LAB_METHOD: String
  TRAUMATIC_TAP: String
  THRESHOLD_HIGH: Float
  LAB_SEQ_METHOD: String
  THRESHOLD_LOW: Float
  PMID_REF: Float
  BM_MORPHOLOGY: String
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type Medical_History_Table {
  MEDICAL_HISTORY: String
  DYSGENETIC_GONAD: String
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type Minimal_Residual_Disease_Table {
  AGE_AT_MRD_ASSESSMENT: Float
  DISEASE_PHASE: String
  DISEASE_PHASE_NUMBER: Float
  COURSE: String
  COURSE_NUMBER: Float
  MRD_METHOD: String
  FLOW_CYTOMETRY_TYPE: String
  MRD_RESULT: String
  MRD_RESULT_NUMERIC: Float
  MRD_RESULT_UNIT: String
  MRD_SENSITIVTY: Float
  MRD_SAMPLE_SOURCE: String
  MRD_MOLECULAR_MARKERS: String
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type Molecular_Analysis_Table {
  AGE_AT_MOLECULAR_ANALYSIS: Float
  DISEASE_PHASE: String
  DISEASE_PHASE_NUMBER: Float
  COURSE: String
  COURSE_NUMBER: Float
  MOLECULAR_ANALYSIS_METHOD: String
  ISCN: String
  INDEPEN_ABB: Float
  NUM_METAPHASES: Float
  MOLECULAR_ABNORMALITY: String
  CHROMOSOME: String
  GENE1: String
  GENE2: String
  VARIANT_TYPE: String
  GENETIC_SEQ: String
  AA_MUTATION: String
  MOLECULAR_ABNORMALITY_RESULT: String
  ALLELIC_RATIO: Float
  TUMOR_CLASSIFICATION: String
  KARYOTYPE_STATUS: String
  NUM_CHROMOSOMES: Float
  MOLECULAR_ANALYSIS_SAMPLE_SOURCE: String
  DNA_INDEX: Float
  TRANSLOCATION_STATUS: String
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type Myeloid_Sarcoma_Involvement_Table {
  AGE_AT_DISEASE_PHASE: Float
  DISEASE_PHASE: String
  DISEASE_PHASE_NUMBER: Float
  COURSE: String
  COURSE_NUMBER: Float
  MYELOID_SARCOMA: String
  MYELOID_SARCOMA_SITE: String
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type Non_Protocol_Therapy_Table {
  NPT_TIMING: String
  DISEASE_PHASE: String
  DISEASE_PHASE_NUMBER: Float
  COURSE: String
  COURSE_NUMBER: Float
  NPT_TYPE: String
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type Non_protocol_Therapy_Table_2 {
  NPT_TIMING: String
  NPT_TYPE: String
  Radiation_Therapy: String
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type Off_Protocol_Therapy_Study_Table {
  AGE_OFF: Float
  OFF_TYPE: String
  REASON_OFF: String
  DISEASE_PHASE: String
  DISEASE_PHASE_NUMBER: Float
  COURSE: String
  COURSE_NUMBER: Float
  Adverse_Event: String
  ANOTHER_STUDY: String
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type Patient_Reported_Outcomes_Metadata_Table {
  STUDY_ID: String
  PRO_MEASURES: String
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type Program {
  PROGRAM_ID: String
  Cancer: String
  Headquarters: String
  Consortium: String
  Consortium_Manager: String
  Subject_Characteristics_Tables: [Subject_Characteristics_Table] @relation(name:"of_programs", direction:IN)
  Studys: [Study] @relation(name:"of_programs", direction:IN)
}

type Radiation_Therapy_Table {
  AGE_AT_RT_START: Float
  AGE_AT_RT_END: Float
  DISEASE_PHASE: String
  DISEASE_PHASE_NUMBER: Float
  COURSE: String
  COURSE_NUMBER: Float
  RT_SITE: String
  RT_DOSE: Float
  RT_UNIT: String
  TUMOR_CLASSIFICATION: String
  TUMOR_TISSUE_TYPE: String
  RT_LATERALITY: String
  ENERGY_TYPE: String
  NUM_FRACTION: Float
  TRANSPOSITION_ORGAN: String
  BOOST: String
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type Secondary_Malignant_Neoplasm_Table {
  AGE_AT_SMN: Float
  DISEASE_PHASE: String
  DISEASE_PHASE_NUMBER: Float
  COURSE: String
  COURSE_NUMBER: Float
  SMN_ICD_O_MORPH: String
  SMN_ICD_O_TOP: String
  SMN_FIELD: String
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type Staging_Table {
  AGE_AT_STAGING: Float
  DISEASE_PHASE: String
  DISEASE_PHASE_NUMBER: Float
  STAGE_SYSTEM: String
  STAGE: String
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type Stem_Cell_Transplant_Table {
  AGE_AT_SCT: Float
  DISEASE_PHASE: String
  DISEASE_PHASE_NUMBER: Float
  COURSE: String
  COURSE_NUMBER: Float
  SCT_TYPE: String
  SCT_SOURCE: String
  SCT_DONOR_RELATIONSHIP: String
  HLA_MATCH: String
  NUMBER_HLA: Float
  NUMBER_MATCHES: Float
  HLA_A_RESULT: String
  HLA_B_RESULT: String
  HLA_C_RESULT: String
  HLA_DRB1_RESULT: String
  HLA_DQ_RESULT: String
  SCT_CONDITIONING_TYPE: String
  SCT_TBI: String
  SCT_CD34_COLL: Float
  SCT_CD34_TRANSPLANT: Float
  SCT_CYCLES: Float
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type Study {
  STUDY_ID: String
  STUDY_Description: String
  Program: Program @relation(name:"of_programs", direction:OUT)
  Subject_Characteristics_Tables: [Subject_Characteristics_Table] @relation(name:"of_programs", direction:IN)
}

type Subject_Characteristics_Table {
  PCDC_SUBJECT_ID: String
  HONEST_BROKER_SUBJECT_ID: String
  DATA_CONTRIBUTOR_ID: String
  STUDY_ID: String
  AGE_AT_ENROLLMENT: Float
  TREATMENT_ARM: String
  ENROLLED_STATUS: String
  YEAR_AT_ENROLLMENT: Float
  Program: Program @relation(name:"of_programs", direction:OUT)
  Study: Study @relation(name:"of_programs", direction:OUT)
  Transfusion_Medicine_Procedures_Tables: [Transfusion_Medicine_Procedures_Table] @relation(name:"of_subject", direction:IN)
  Subject_Response_Tables: [Subject_Response_Table] @relation(name:"of_subject", direction:IN)
  Growing_Teratoma_Syndrome_Tables: [Growing_Teratoma_Syndrome_Table] @relation(name:"of_subject", direction:IN)
  Cytology_Tables: [Cytology_Table] @relation(name:"of_subject", direction:IN)
  Secondary_Malignant_Neoplasm_Tables: [Secondary_Malignant_Neoplasm_Table] @relation(name:"of_subject", direction:IN)
  Adverse_Events_Tables: [Adverse_Events_Table] @relation(name:"of_subject", direction:IN)
  Vitals_Tables: [Vitals_Table] @relation(name:"of_subject", direction:IN)
  Radiation_Therapy_Tables: [Radiation_Therapy_Table] @relation(name:"of_subject", direction:IN)
  Molecular_Analysis_Tables: [Molecular_Analysis_Table] @relation(name:"of_subject", direction:IN)
  Stem_Cell_Transplant_Tables: [Stem_Cell_Transplant_Table] @relation(name:"of_subject", direction:IN)
  Concomitant_Medications_Tables: [Concomitant_Medications_Table] @relation(name:"of_subject", direction:IN)
  Echocardiogram_Tables: [Echocardiogram_Table] @relation(name:"of_subject", direction:IN)
  Demographics_Tables: [Demographics_Table] @relation(name:"of_subject", direction:IN)
  Non_Protocol_Therapy_Tables: [Non_Protocol_Therapy_Table] @relation(name:"of_subject", direction:IN)
  Tumor_Assessment_Tables: [Tumor_Assessment_Table] @relation(name:"of_subject", direction:IN)
  Histology_Tables: [Histology_Table] @relation(name:"of_subject", direction:IN)
  Staging_Tables: [Staging_Table] @relation(name:"of_subject", direction:IN)
  Patient_Reported_Outcomes_Metadata_Tables: [Patient_Reported_Outcomes_Metadata_Table] @relation(name:"of_subject", direction:IN)
  Survival_Characteristics_Tables: [Survival_Characteristics_Table] @relation(name:"of_subject", direction:IN)
  Non_protocol_Therapy_Table_2s: [Non_protocol_Therapy_Table_2] @relation(name:"of_subject", direction:IN)
  Course_Timing_Tables: [Course_Timing_Table] @relation(name:"of_subject", direction:IN)
  Immunohistochemistry_Tables: [Immunohistochemistry_Table] @relation(name:"of_subject", direction:IN)
  Off_Protocol_Therapy_Study_Tables: [Off_Protocol_Therapy_Study_Table] @relation(name:"of_subject", direction:IN)
  Medical_History_Tables: [Medical_History_Table] @relation(name:"of_subject", direction:IN)
  Minimal_Residual_Disease_Tables: [Minimal_Residual_Disease_Table] @relation(name:"of_subject", direction:IN)
  Labs_Tables: [Labs_Table] @relation(name:"of_subject", direction:IN)
  Disease_Characteristics_Tables: [Disease_Characteristics_Table] @relation(name:"of_subject", direction:IN)
  Total_Dose_Tables: [Total_Dose_Table] @relation(name:"of_subject", direction:IN)
  Biopsy_Surgical_Procedures_Tables: [Biopsy_Surgical_Procedures_Table] @relation(name:"of_subject", direction:IN)
  Cellular_Immunotherapy_Tables: [Cellular_Immunotherapy_Table] @relation(name:"of_subject", direction:IN)
  Files: [File] @relation(name:"of_subject", direction:IN)
  Myeloid_Sarcoma_Involvement_Tables: [Myeloid_Sarcoma_Involvement_Table] @relation(name:"of_subject", direction:IN)
  Disease_Phase_Timing_Tables: [Disease_Phase_Timing_Table] @relation(name:"of_subject", direction:IN)
}

type Subject_Response_Table {
  AGE_AT_RESPONSE: Float
  DISEASE_PHASE: String
  DISEASE_PHASE_NUMBER: Float
  COURSE: String
  COURSE_NUMBER: Float
  RESPONSE_CATEGORY: String
  RESPONSE: String
  BM_PCT_BLASTS_AT_RESPONSE: Float
  BM_ANALYSIS_METHOD_AT_RESPONSE: String
  ANC_AT_RESPONSE: Float
  ANC_THRESHOLD_AT_RESPONSE: String
  PLATELET_COUNT_AT_RESPONSE: Float
  PLATELET_THRESHOLD_AT_RESPONSE: String
  RESPONSE_CRITERIA: String
  RESPONSE_CRITERIA_VERSION: String
  RESPONSE_METHOD: String
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type Survival_Characteristics_Table {
  AGE_AT_LKSS: Float
  DISEASE_PHASE: String
  DISEASE_PHASE_NUMBER: Float
  COURSE: String
  COURSE_NUMBER: Float
  LKSS: String
  AGE_LOST_TO_FOLLOW_UP: Float
  CAUSE_OF_DEATH: String
  TRM_TYPE: String
  CAUSE_OF_DEATH_DETAIL: String
  CAUSE_OF_DEATH_RANKING: String
  LKSS_WITH_DISEASE: String
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type Total_Dose_Table {
  AGE_AT_TOTAL_DOSE_START: Float
  AGE_A_TOTAL_DOSE_END: Float
  DISEASE_PHASE: String
  DISEASE_PHASE_NUMBER: Float
  COURSE: String
  COURSE_NUMBER: Float
  ROUTE: String
  ANTINEOPLASTIC_AGENT: String
  NUMBER_DOSES: Float
  TOTAL_DOSE_ADMINISTERED: Float
  TOTAL_DOSE_INTENDED: Float
  TOTAL_DOSE_UNITS: String
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type Transfusion_Medicine_Procedures_Table {
  AGE_AT_TMP_START: Float
  DISEASE_PHASE: String
  DISEASE_PHASE_NUMBER: Float
  COURSE: String
  COURSE_NUMBER: Float
  TMP_TYPE: String
  TMP_PRODUCT: String
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type Tumor_Assessment_Table {
  AGE_AT_TUMOR_ASSESSMENT: Float
  DISEASE_PHASE: String
  DISEASE_PHASE_NUMBER: Float
  COURSE: String
  COURSE_NUMBER: Float
  TUMOR_DETECTION_METHOD: String
  TUMOR_CLASSIFICATION: String
  TUMOR_TISSUE_TYPE: String
  TUMOR_SITE: String
  TUMOR_LATERALITY: String
  SITE_WITHIN_BONE: String
  FRACTURE: String
  LONGEST_DIAM_DIM1: Float
  LONGEST_DIAM_DIM2: Float
  LONGEST_DIAM_DIM3: Float
  COMPUTED_VOLUME: Float
  ESTIMATED_VOLUME: Float
  TUMOR_VOLUME: String
  JOINT_INVOLVEMENT: String
  NODAL_INVOLVEMENT: String
  SKIP_LESION: String
  IPSILATERAL_NODULES: String
  PLEURAL_EFFUSION: String
  PLEURAL_CYTOLOGY: String
  PERITONEAL_EFFUSION: String
  PERITONEAL_CYTOLOGY: String
  EXTENSION_SITE: String
  NODAL_SITE: String
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type Vitals_Table {
  AGE_AT_VITALS: Float
  DISEASE_PHASE: String
  DISEASE_PHASE_NUMBER: Float
  COURSE: String
  COURSE_NUMBER: Float
  VITALS_TEST: String
  VITALS_RESULT: String
  VITALS_RESULT_NUMERIC: Float
  VITALS_RESULT_UNIT: String
  Subject_Characteristics_Table: Subject_Characteristics_Table @relation(name:"of_subject", direction:OUT)
}

type GroupCount {
    group: String
    subjects: Int
}

type FileOverview {
    file_name: String
    file_type: String
    file_description: String
    file_format: String
    file_size: Int
    md5sum: String
    file_status: String
    uuid: String
    file_location: String
    subject_id: String
    study_id: String
    program_id: String
}

type StudyInfo {
    study_id: String
    study_description: String
    associated_subject_count: Int
}

type ProgramInfo {
    program_id: String
    cancer: String
    program_headquarters: String
    program_consortium: String
    consortium_manager: String
    associated_sub_count: Int
    associated_study_count: Int
}

type ProgramDetail {
    program_id: String
    cancer: String
    program_consortium: String
    program_consortium_manager: String
    program_headquarters: String
    num_files: Int
    num_studies: Int
    studies: [StudySubjectCount]
}

type StudyDetail {
    study_id: String
    study_description: String
    num_cases: Int
    num_files: Int
    subjects: [SubjectDetail]
}

type SubjectId {
    pcdc_subject_id: String
}

type SubjectDetail {
    pcdc_subject_id: String
    honest_broker_subject_id: String
    data_contributor_id: String
    age_at_enrollment: Float
    treatment_arm: String
    enrolled_status: String
    year_at_enrollment: Float
    adverse_events: [Adverse_Events_Table]
    radiation_therapy: [Radiation_Therapy_Table]
    medical_history: [Medical_History_Table]
    course_timing: [Course_Timing_Table]
}

type StudySubjectCount {
    study_id: String
    study_description: String
    subjectCount: Int
}

type SubjectOverview {
    pcdc_subject_id: String
    race: String
    sex: String
    disease_phase: String
    treatment_arm: String
    disease_site: String
    data_contributor_id: String
    ae_grade: String
    ae_outcome: String
    study_id: String
    program_id: String
    cancer: String
    files: [FileId]
}

type FileId {
    file_id: String
}

type SearchResult {
    numOfPrograms: Int
    numberOfSubjects: Int
    num_of_studies: Int
    numberOfFiles: Int
    fileIds: [String],
    subjectIds: [String]
}

schema {
    query: QueryType
}

type QueryType {
    
    # Schema metadata
    schemaVersion: String @cypher(statement: "RETURN '0.2.1'")

    # Node count queries
    numOfPrograms: Int @cypher(statement: "MATCH (x:Program) RETURN COUNT(x)")
    num_of_studies: Int @cypher(statement: "MATCH (x:Study) RETURN COUNT(x)")
    numberOfSubjects: Int @cypher(statement: "MATCH (x:Subject_Characteristics_Table) RETURN COUNT(x)")
    numberOfFiles: Int @cypher(statement: "MATCH (x:File) RETURN COUNT(x)")
    
    # Queries to list nodes
    listOfPrograms: [ProgramInfo] @cypher(statement: """
        MATCH (p: Program)
        OPTIONAL MATCH (p)<-[*]-(sc: Subject_Characteristics_Table)
        OPTIONAL MATCH (p)<--(s:Study)
        RETURN {
            program_id: p.PROGRAM_ID,
            cancer: p.Cancer,
            program_headquarters: p.Headquarters,
            program_consortium: p.Consortium,
            consortium_manager: p.Consortium_Manager,
            associated_sub_count: COUNT(DISTINCT sc.PCDC_SUBJECT_ID),
            associated_study_count: COUNT(DISTINCT s)
        }
    """, passThrough: true)

    list_of_studies: [StudyInfo] @cypher(statement: """
        MATCH (s:Study)
        OPTIONAL MATCH (s)<--(sc: Subject_Characteristics_Table)
        RETURN {
            study_id: s.STUDY_ID,
            study_description: s.STUDY_Description,
            associated_subject_count: COUNT(DISTINCT sc)
        }
    """, passThrough: true)

    list_of_studies_by_program(program_id: String): [StudyInfo] @cypher(statement: """
        MATCH (p: Program {PROGRAM_ID: $program_id})<--(s: Study)
        OPTIONAL MATCH (s)<--(sc: Subject_Characteristics_Table)
        RETURN {
            study_id: s.STUDY_ID,
            study_description: s.STUDY_Description,
            associated_subject_count: COUNT(DISTINCT sc)
        }
    """, passThrough: true)

    # Node detail queries
    programDetails(program_id: String): ProgramDetail @cypher(statement: """
        MATCH (p: Program {PROGRAM_ID: $program_id})
        OPTIONAL MATCH (p)<--(s: Study)<--(sc: Subject_Characteristics_Table)
        WITH
            s, COUNT(DISTINCT sc) AS num_study_subjects
        WITH
            COLLECT(DISTINCT s{
                study_id: s.STUDY_ID,
                study_description: s.STUDY_Description,
                subjectCount: num_study_subjects
            }) AS studies
        MATCH (p: Program {PROGRAM_ID: $program_id})
        OPTIONAL MATCH (p)<--(s: Study)
        OPTIONAL MATCH (s)<--(sc: Subject_Characteristics_Table)
        OPTIONAL MATCH (sc)<--(f: File)
        WITH
            p, studies, 
            COUNT(DISTINCT f) AS num_files,
            COUNT(DISTINCT s) AS num_studies
        RETURN {
            program_id: p.PROGRAM_ID,
            cancer: p.Cancer,
            program_consortium: p.Consortium,
            program_consortium_manager: p.Consortium_Manager,
            program_headquarters: p.Headquarters,
            num_files: num_files,
            num_studies: num_studies,
            studies: studies
        }
    """, passThrough: true)

    studyDetails(study_id: String): StudyDetail @cypher(statement: """
        MATCH (s: Study {STUDY_ID: $study_id})
        OPTIONAL MATCH (s)<--(sc: Subject_Characteristics_Table)<--(f: File)
        WITH 
            COLLECT(DISTINCT sc{
                pcdc_subject_id: sc.PCDC_SUBJECT_ID,
                honest_broker_subject_id: sc.HONEST_BROKER_SUBJECT_ID,
                data_contributor_id: sc.DATA_CONTRIBUTOR_ID,
                age_at_enrollment: sc.AGE_AT_ENROLLMENT,
                treatment_arm: sc.TREATMENT_ARM,
                enrolled_status: sc.ENROLLED_STATUS,
                year_at_enrollment: sc.YEAR_AT_ENROLLMENT
            }) AS subjects
        MATCH (s: Study {STUDY_ID: $study_id})
        OPTIONAL MATCH (s)<--(sc: Subject_Characteristics_Table)
        OPTIONAL MATCH (sc)<--(f: File)
        WITH
            s, subjects,
            COUNT(DISTINCT sc) AS num_cases,
            COUNT(DISTINCT f) AS num_files
        RETURN {
            study_id: s.STUDY_ID,
            study_description: s.STUDY_Description,
            num_cases: num_cases,
            num_files: num_files,
            subjects: subjects
        }
    """, passThrough: true)

    subjectDetails(subject_id: String): SubjectDetail @cypher(statement: """
        MATCH (sc: Subject_Characteristics_Table {PCDC_SUBJECT_ID: $subject_id})<--(ae: Adverse_Events_Table)
        WITH
            COLLECT (DISTINCT ae{
                AGE_AT_AE:  ae.AGE_AT_AE,
                DISEASE_PHASE:  ae.DISEASE_PHASE,
                DISEASE_PHASE_NUMBER:  ae.DISEASE_PHASE_NUMBER,
                COURSE:  ae.COURSE,
                COURSE_NUMBER:  ae.COURSE_NUMBER,
                ADVERSE_EVENT:  ae.ADVERSE_EVENT,
                AE_CODE:  ae.AE_CODE,
                AE_SYSTEM:  ae.AE_SYSTEM,
                AE_SYSTEM_VERSION:  ae.AE_SYSTEM_VERSION,
                AE_GRADE:  ae.AE_GRADE,
                AE_ATTRIBUTION:  ae.AE_ATTRIBUTION,
                AE_OUTCOME:  ae.AE_OUTCOME,
                AE_ICU:  ae.AE_ICU,
                AE_MEDICATION:  ae.AE_MEDICATION,
                AE_INTERVENTION:  ae.AE_INTERVENTION,
                AE_MED_INTERVENTION_DETAIL:  ae.AE_MED_INTERVENTION_DETAIL,
                AE_PATHOGEN:  ae.AE_PATHOGEN,
                AE_PATHOGEN_CONFIRMATION:  ae.AE_PATHOGEN_CONFIRMATION,
                GVHD_ACUITY:  ae.GVHD_ACUITY,
                GVHD_ORGAN:  ae.GVHD_ORGAN,
                AGE_AT_AE_RESOLVED:  ae.AGE_AT_AE_RESOLVED,
                AVN_JOINT:  ae.AVN_JOINT,
                AVN_JOINT_LATERALITY:  ae.AVN_JOINT_LATERALITY,
                AVN_METHOD:  ae.AVN_METHOD,
                ORTHOPEDIC_PROCEDURE:  ae.ORTHOPEDIC_PROCEDURE,
                INFECTION_CLASSIFICATION:  ae.INFECTION_CLASSIFICATION
            }) as adverse_events
        MATCH (sc: Subject_Characteristics_Table {PCDC_SUBJECT_ID: $subject_id})<--(rt: Radiation_Therapy_Table)
        WITH
            COLLECT (DISTINCT rt{
                AGE_AT_RT_START: rt.AGE_AT_RT_START,
                AGE_AT_RT_END: rt.AGE_AT_RT_END,
                DISEASE_PHASE: rt.DISEASE_PHASE,
                DISEASE_PHASE_NUMBER: rt.DISEASE_PHASE_NUMBER,
                COURSE: rt.COURSE,
                COURSE_NUMBER: rt.COURSE_NUMBER,
                RT_SITE: rt.RT_SITE,
                RT_DOSE: rt.RT_DOSE,
                RT_UNIT: rt.RT_UNIT,
                TUMOR_CLASSIFICATION: rt.TUMOR_CLASSIFICATION,
                TUMOR_TISSUE_TYPE: rt.TUMOR_TISSUE_TYPE,
                RT_LATERALITY: rt.RT_LATERALITY,
                ENERGY_TYPE: rt.ENERGY_TYPE,
                NUM_FRACTION: rt.NUM_FRACTION,
                TRANSPOSITION_ORGAN: rt.TRANSPOSITION_ORGAN,
                BOOST: rt.BOOST
            }) AS radiation_therapy,
            adverse_events
        MATCH (sc: Subject_Characteristics_Table {PCDC_SUBJECT_ID: $subject_id})<--(mh: Medical_History_Table)
        WITH
            COLLECT (DISTINCT mh{
                MEDICAL_HISTORY: mh.MEDICAL_HISTORY,
                DYSGENETIC_GONAD: mh.DYSGENETIC_GONAD
            }) AS medical_history,
            adverse_events,
            radiation_therapy
        MATCH (sc: Subject_Characteristics_Table {PCDC_SUBJECT_ID: $subject_id})<--(ct: Course_Timing_Table)
        WITH
            COLLECT (DISTINCT ct{
                COURSE: ct.COURSE,
                COURSE_NUMBER: ct.COURSE_NUMBER,
                AGE_AT_COURSE_START: ct.AGE_AT_COURSE_START,
                AGE_AT_COURSE_END: ct.AGE_AT_COURSE_END,
                AGE_AT_COURSE_ANC_500: ct.AGE_AT_COURSE_ANC_500,
                AGE_AT_TXASSIGN: ct.AGE_AT_TXASSIGN
            }) AS course_timing,
            adverse_events,
            radiation_therapy,
            medical_history
        MATCH (sc: Subject_Characteristics_Table {PCDC_SUBJECT_ID: $subject_id})
        RETURN {
            pcdc_subject_id: sc.PCDC_SUBJECT_ID,
            honest_broker_subject_id: sc.HONEST_BROKER_SUBJECT_ID,
            data_contributor_id: sc.DATA_CONTRIBUTOR_ID,
            age_at_enrollment: sc.AGE_AT_ENROLLMENT,
            treatment_arm: sc.TREATMENT_ARM,
            enrolled_status: sc.ENROLLED_STATUS,
            year_at_enrollment: sc.YEAR_AT_ENROLLMENT,
            adverse_events: adverse_events,
            radiation_therapy: radiation_therapy,
            medical_history: medical_history,
            course_timing: course_timing
        }
    """, passThrough: true)

    subjectCourseTiming(subject_id: String): [Course_Timing_Table] @cypher(statement: """
        MATCH (sc: Subject_Characteristics_Table {PCDC_SUBJECT_ID: $subject_id})<--(ct: Course_Timing_Table)
        RETURN {
            COURSE: ct.COURSE,
            COURSE_NUMBER: ct.COURSE_NUMBER,
            AGE_AT_COURSE_START: ct.AGE_AT_COURSE_START,
            AGE_AT_COURSE_END: ct.AGE_AT_COURSE_END,
            AGE_AT_COURSE_ANC_500: ct.AGE_AT_COURSE_ANC_500,
            AGE_AT_TXASSIGN: ct.AGE_AT_TXASSIGN
        }
    """, passThrough: true)

    fileOverview(file_ids: [String] = [], order_by: String = ""): [FileOverview] @cypher(statement: """
        MATCH (f:File)
            WHERE (size($file_ids) = 0 OR $file_ids IS NULL OR f.UUID IN $file_ids)
        OPTIONAL MATCH (f)-->(sc:Subject_Characteristics_Table)-->(s:Study)-->(p:Program)
        RETURN {
          file_name: f.FILE_NAME,
          file_type: f.FILE_TYPE,
          file_description: f.FILE_DESCRIPTION,
          file_format: f.FILE_FORMAT,
          file_size: f.FILE_SIZE,
          md5sum: f.MD5SUM,
          file_status: f.FILE_STATUS,
          uuid: f.UUID,
          file_location: f.FILE_LOCATION,
          subject_id: sc.PCDC_SUBJECT_ID,
          study_id: s.STUDY_ID,
          program_id: p.PROGRAM_ID,
          cancer: p.Cancer
        }
        ORDER BY CASE $order_by
            WHEN "file_name" THEN f.FILE_NAME
            WHEN "file_type" THEN f.FILE_TYPE
            WHEN "file_description" THEN f.FILE_DESCRIPTION
            WHEN "file_format" THEN f.FILE_FORMAT
            WHEN "file_size" THEN f.FILE_SIZE
            WHEN "md5sum" THEN f.MD5SUM
            WHEN "file_status" THEN f.FILE_STATUS
            WHEN "uuid" THEN f.UUID
            WHEN "file_location" THEN f.FILE_LOCATION
            WHEN "subject_id" THEN sc.PCDC_SUBJECT_ID
            WHEN "study_id" THEN s.STUDY_ID
            WHEN "program_id" THEN p.PROGRAM_ID
            WHEN "cancer" THEN p.Cancer
        ELSE f.FILE_NAME END
    """, passThrough: true)

    fileOverviewDesc(file_ids: [String] = [], order_by: String = ""): [FileOverview] @cypher(statement: """
        MATCH (f:File)
            WHERE (size($file_ids) = 0 OR $file_ids IS NULL OR f.UUID IN $file_ids)
        OPTIONAL MATCH (f)-->(sc:Subject_Characteristics_Table)-->(s:Study)-->(p:Program)
        RETURN {
          file_name: f.FILE_NAME,
          file_type: f.FILE_TYPE,
          file_description: f.FILE_DESCRIPTION,
          file_format: f.FILE_FORMAT,
          file_size: f.FILE_SIZE,
          md5sum: f.MD5SUM,
          file_status: f.FILE_STATUS,
          uuid: f.UUID,
          file_location: f.FILE_LOCATION,
          subject_id: sc.PCDC_SUBJECT_ID,
          study_id: s.STUDY_ID,
          program_id: p.PROGRAM_ID,
          cancer: p.Cancer
        }
        ORDER BY CASE $order_by
            WHEN "file_name" THEN f.FILE_NAME
            WHEN "file_type" THEN f.FILE_TYPE
            WHEN "file_description" THEN f.FILE_DESCRIPTION
            WHEN "file_format" THEN f.FILE_FORMAT
            WHEN "file_size" THEN f.FILE_SIZE
            WHEN "md5sum" THEN f.MD5SUM
            WHEN "file_status" THEN f.FILE_STATUS
            WHEN "uuid" THEN f.UUID
            WHEN "file_location" THEN f.FILE_LOCATION
            WHEN "subject_id" THEN sc.PCDC_SUBJECT_ID
            WHEN "study_id" THEN s.STUDY_ID
            WHEN "program_id" THEN p.PROGRAM_ID
            WHEN "cancer" THEN p.Cancer
        ELSE f.FILE_NAME END DESC
    """, passThrough: true)

    subjectOverviewPaged(subject_ids: [String] = [], order_by: String = ""): [SubjectOverview] @cypher(statement: """
        MATCH (sc: Subject_Characteristics_Table)
            WHERE (size($subject_ids) = 0 OR $subject_ids IS NULL OR sc.PCDC_SUBJECT_ID IN $subject_ids)
        OPTIONAL MATCH (p: Program)<--(s: Study)<--(sc)
        OPTIONAL MATCH (demo: Demographics_Table)-->(sc)
        OPTIONAL MATCH (dpt: Disease_Phase_Timing_Table)-->(sc)
        OPTIONAL MATCH (dc: Disease_Characteristics_Table)-->(sc)
        OPTIONAL MATCH (ae: Adverse_Events_Table)-->(sc)
        OPTIONAL MATCH (f: File)-->(sc)
        WITH 
            sc.PCDC_SUBJECT_ID AS pcdc_subject_id,
            demo.RACE AS race,
            demo.SEX AS sex,
            dpt.DISEASE_PHASE AS disease_phase,
            sc.TREATMENT_ARM AS treatment_arm,
            dc.DISEASE_SITE AS disease_site,
            sc.DATA_CONTRIBUTOR_ID AS data_contributor_id,
            ae.AE_GRADE AS ae_grade,
            ae.AE_OUTCOME AS ae_outcome,
            sc.STUDY_ID AS study_id,
            p.PROGRAM_ID as program_id,
            p.Cancer as cancer,
            COLLECT(DISTINCT f {
                file_id: f.UUID
            }) AS files
        RETURN {
            pcdc_subject_id: pcdc_subject_id,
            race: race,
            sex: sex,
            disease_phase: disease_phase,
            treatment_arm: treatment_arm,
            disease_site: disease_site,
            data_contributor_id: data_contributor_id,
            ae_grade: ae_grade,
            ae_outcome: ae_outcome,
            study_id: study_id,
            program_id: program_id,
            cancer: cancer,
            files: files
        }
        ORDER BY CASE $order_by
            WHEN "pcdc_subject_id" THEN pcdc_subject_id
            WHEN "race" THEN race
            WHEN "sex" THEN sex
            WHEN "disease_phase" THEN disease_phase
            WHEN "treatment_arm" THEN treatment_arm
            WHEN "disease_site" THEN disease_site
            WHEN "data_contributor_id" THEN data_contributor_id
            WHEN "ae_grade" THEN ae_grade
            WHEN "ae_outcome" THEN ae_outcome
            WHEN "study_id" THEN study_id
            WHEN "program_id" THEN program_id
            WHEN "cancer" THEN cancer
            WHEN "files" THEN files
        ELSE pcdc_subject_id END
    """, passThrough: true)

    subjectOverviewPagedDesc(subject_ids: [String] = [], order_by: String = ""): [SubjectOverview] @cypher(statement: """
        MATCH (sc: Subject_Characteristics_Table)
            WHERE (size($subject_ids) = 0 OR $subject_ids IS NULL OR sc.PCDC_SUBJECT_ID IN $subject_ids)
        OPTIONAL MATCH (p: Program)<--(s: Study)<--(sc)
        OPTIONAL MATCH (demo: Demographics_Table)-->(sc)
        OPTIONAL MATCH (dpt: Disease_Phase_Timing_Table)-->(sc)
        OPTIONAL MATCH (dc: Disease_Characteristics_Table)-->(sc)
        OPTIONAL MATCH (ae: Adverse_Events_Table)-->(sc)
        OPTIONAL MATCH (f: File)-->(sc)
        WITH 
            sc.PCDC_SUBJECT_ID AS pcdc_subject_id,
            demo.RACE AS race,
            demo.SEX AS sex,
            dpt.DISEASE_PHASE AS disease_phase,
            sc.TREATMENT_ARM AS treatment_arm,
            dc.DISEASE_SITE AS disease_site,
            sc.DATA_CONTRIBUTOR_ID AS data_contributor_id,
            ae.AE_GRADE AS ae_grade,
            ae.AE_OUTCOME AS ae_outcome,
            sc.STUDY_ID AS study_id,
            p.PROGRAM_ID as program_id,
            p.Cancer as cancer,
            COLLECT(DISTINCT f {
                file_id: f.UUID
            }) AS files
        RETURN {
            pcdc_subject_id: pcdc_subject_id,
            race: race,
            sex: sex,
            disease_phase: disease_phase,
            treatment_arm: treatment_arm,
            disease_site: disease_site,
            data_contributor_id: data_contributor_id,
            ae_grade: ae_grade,
            ae_outcome: ae_outcome,
            study_id: study_id,
            program_id: program_id,
            cancer: cancer,
            files: files
        }
        ORDER BY CASE $order_by
            WHEN "pcdc_subject_id" THEN pcdc_subject_id
            WHEN "race" THEN race
            WHEN "sex" THEN sex
            WHEN "disease_phase" THEN disease_phase
            WHEN "treatment_arm" THEN treatment_arm
            WHEN "disease_site" THEN disease_site
            WHEN "data_contributor_id" THEN data_contributor_id
            WHEN "ae_grade" THEN ae_grade
            WHEN "ae_outcome" THEN ae_outcome
            WHEN "study_id" THEN study_id
            WHEN "program_id" THEN program_id
            WHEN "cancer" THEN cancer
            WHEN "files" THEN files
        ELSE pcdc_subject_id END DESC
    """, passThrough: true)

    studySubjectCountByDiseasePhase(study_id: String): [GroupCount] @cypher(statement: """
        MATCH (s: Study {STUDY_ID: $study_id})<--(sc: Subject_Characteristics_Table)<--(dc: Disease_Characteristics_Table)
        RETURN {
          group: dc.DISEASE_PHASE,
          subjects: count(DISTINCT(sc))
        }  
    """, passThrough: true) 

    subjectIdsOfStudy(study_id: String): [SubjectId] @cypher(statement: """
        MATCH (s: Study)<--(sc: Subject_Characteristics_Table)
            WHERE s.STUDY_ID = $study_id
        RETURN {
            pcdc_subject_id: sc.PCDC_SUBJECT_ID
        }
    """, passThrough: true)

    subjectIdsOfProgram(program_id: String): [SubjectId] @cypher(statement: """
        MATCH (p: Program)<-[*]-(sc: Subject_Characteristics_Table)
            WHERE p.PROGRAM_ID = $program_id
        RETURN {
            pcdc_subject_id: sc.PCDC_SUBJECT_ID
        }
    """, passThrough: true)

    programSubjectCountByTreatmentArm(program_ids: [String] = []): [GroupCount] @cypher(statement: """
        MATCH (p: Program)<-[*]-(sc: Subject_Characteristics_Table)
          WHERE (size($program_ids) = 0 OR p.PROGRAM_ID IN $program_ids)
        RETURN {
          group: sc.TREATMENT_ARM,
          subjects: count(DISTINCT(sc))
        }
    """, passThrough: true)

    subjectCountByTreatmentArm(subject_ids: [String] = []): [GroupCount] @cypher(statement: """
        MATCH (p: Program)<-[*]-(sc: Subject_Characteristics_Table)
          WHERE (size($subject_ids) = 0 OR sc.PCDC_SUBJECT_ID IN $subject_ids)
        RETURN {
          group: sc.TREATMENT_ARM,
          subjects: count(DISTINCT(sc))
        }
    """, passThrough: true)

    subjectCountByProgram(subject_ids: [String] = []): [GroupCount] @cypher(statement: """
        MATCH (sc: Subject_Characteristics_Table)-[*]->(p: Program)
          WHERE (size($subject_ids) = 0 OR sc.PCDC_SUBJECT_ID IN $subject_ids)
        RETURN {
          group: p.PROGRAM_ID,
          subjects: count(DISTINCT(sc))
        }
    """, passThrough: true)

    subjectCountByStudy(subject_ids: [String] = []): [GroupCount] @cypher(statement: """
        MATCH (sc: Subject_Characteristics_Table)-->(s: Study)
            WHERE (size($subject_ids) = 0 OR sc.PCDC_SUBJECT_ID IN $subject_ids)
        RETURN {
          group: s.STUDY_ID,
          subjects: count(DISTINCT(sc))
        }
    """, passThrough: true)

    subjectCountByDataContributorId(subject_ids: [String] = []): [GroupCount] @cypher(statement: """
        MATCH (sc: Subject_Characteristics_Table)
            WHERE (size($subject_ids) = 0 OR sc.PCDC_SUBJECT_ID IN $subject_ids)
        RETURN {
          group: sc.DATA_CONTRIBUTOR_ID,
          subjects: count(DISTINCT(sc))
        }
    """, passThrough: true)

    subjectCountByDiseasePhase(subject_ids: [String] = []): [GroupCount] @cypher(statement: """
        MATCH (sc: Subject_Characteristics_Table)<--(dc: Disease_Characteristics_Table)
            WHERE (size($subject_ids) = 0 OR sc.PCDC_SUBJECT_ID IN $subject_ids)
        RETURN {
          group: dc.DISEASE_PHASE,
          subjects: count(DISTINCT(sc))
        }  
    """, passThrough: true) 

    subjectCountBySex(subject_ids: [String] = []): [GroupCount] @cypher(statement: """
        MATCH (sc: Subject_Characteristics_Table)<--(demo: Demographics_Table)
            WHERE (size($subject_ids) = 0 OR sc.PCDC_SUBJECT_ID IN $subject_ids)
        RETURN {
          group: demo.SEX,
          subjects: count(DISTINCT(sc))
        }  
    """, passThrough: true) 

    subjectCountByRace(subject_ids: [String] = []): [GroupCount] @cypher(statement: """
        MATCH (sc: Subject_Characteristics_Table)<--(demo: Demographics_Table)
            WHERE (size($subject_ids) = 0 OR sc.PCDC_SUBJECT_ID IN $subject_ids)
        RETURN {
          group: demo.RACE,
          subjects: count(DISTINCT(sc))
        }
    """, passThrough: true) 

    subjectCountByCourse(subject_ids: [String] = []): [GroupCount] @cypher(statement: """
        MATCH (sc: Subject_Characteristics_Table)<--(ct: Course_Timing_Table)
            WHERE (size($subject_ids) = 0 OR sc.PCDC_SUBJECT_ID IN $subject_ids)
        RETURN {
          group: ct.COURSE,
          subjects: count(DISTINCT(sc))
        }
    """, passThrough: true)  

    subjectCountByDiseaseSite(subject_ids: [String] = []): [GroupCount] @cypher(statement: """
        MATCH (sc: Subject_Characteristics_Table)<--(dc: Disease_Characteristics_Table)
            WHERE (size($subject_ids) = 0 OR sc.PCDC_SUBJECT_ID IN $subject_ids)
        RETURN {
          group: dc.DISEASE_SITE,
          subjects: count(DISTINCT(sc))
        }
    """, passThrough: true)  

    subjectCountByAEGrade(subject_ids: [String] = []): [GroupCount] @cypher(statement: """
        MATCH (sc: Subject_Characteristics_Table)<--(ae: Adverse_Events_Table)
            WHERE (size($subject_ids) = 0 OR sc.PCDC_SUBJECT_ID IN $subject_ids)
        RETURN {
          group: ae.AE_GRADE,
          subjects: count(DISTINCT(sc))
        }
    """, passThrough: true) 

    subjectCountByAEOutcome(subject_ids: [String] = []): [GroupCount] @cypher(statement: """
        MATCH (sc: Subject_Characteristics_Table)<--(ae: Adverse_Events_Table)
            WHERE (size($subject_ids) = 0 OR sc.PCDC_SUBJECT_ID IN $subject_ids)
        RETURN {
          group: ae.AE_OUTCOME,
          subjects: count(DISTINCT(sc))
        }
    """, passThrough: true) 

    filterSubjectCountByDataContributor (
        pcdc_subject_id: [String] = [],
        data_contributor_id: [String] = [],
        study_id: [String] = [],
        treatment_arm: [String] = [],
        race: [String] = [],
        sex: [String] = [],
        disease_phase: [String] = [],
        ae_outcome: [String] = [],
        ae_grade: [String] = [],
        disease_site: [String] = [],
        fileType: [String] = [],
        cancer: [String] = []
    ): [GroupCount] @cypher(statement: """
        MATCH (sc:Subject_Characteristics_Table)
            WITH COLLECT(DISTINCT sc.DATA_CONTRIBUTOR_ID) AS groups
        MATCH (sc:Subject_Characteristics_Table)
            WHERE
                (size($pcdc_subject_id) = 0 OR $pcdc_subject_id IS NULL OR sc.PCDC_SUBJECT_ID IN $pcdc_subject_id) AND
                (size($study_id) = 0 OR $study_id IS NULL OR sc.STUDY_ID IN $study_id) AND
                (size($treatment_arm) = 0 OR $treatment_arm IS NULL OR sc.TREATMENT_ARM IN $treatment_arm)
        OPTIONAL MATCH (demo: Demographics_Table)-->(sc)
            WHERE
                (size($race) = 0 OR $race IS NULL OR demo.RACE IN $race) AND
                (size($sex) = 0 OR $sex IS NULL OR demo.SEX IN $sex)
        OPTIONAL MATCH (dpt: Disease_Phase_Timing_Table)-->(sc)
            WHERE
                (size($disease_phase) = 0 OR $disease_phase IS NULL OR dpt.DISEASE_PHASE IN $disease_phase)
        OPTIONAL MATCH (ae: Adverse_Events_Table)-->(sc)
            WHERE
                (size($ae_outcome) = 0 OR $ae_outcome IS NULL OR ae.AE_OUTCOME IN $ae_outcome) AND
                (size($ae_grade) = 0 OR $ae_grade IS NULL OR ae.AE_GRADE IN $ae_grade)
        OPTIONAL MATCH (dct: Disease_Characteristics_Table)-->(sc)
            WHERE
                (size($disease_site) = 0 OR $disease_site IS NULL OR dct.DISEASE_SITE IN $disease_site)
        OPTIONAL MATCH (f: File)-->(sc)
            WHERE
                (size($fileType) = 0 OR $fileType IS NULL OR f.FILE_TYPE IN $fileType)
        OPTIONAL MATCH (p: Program)<--(s: Study)<--(sc)
            WHERE
                (size($cancer) = 0 OR $cancer IS NULL OR p.Cancer IN $cancer)
        WITH DISTINCT sc, groups
        WITH sc.DATA_CONTRIBUTOR_ID AS count_group,
             count(sc) AS count,
             groups
        UNWIND groups AS group
        RETURN {
            group: group,
            subjects: SUM(CASE count_group WHEN group THEN count ELSE 0 END)
        }
    """, passThrough: true)

    filterSubjectCountByStudy (
        pcdc_subject_id: [String] = [],
        data_contributor_id: [String] = [],
        study_id: [String] = [],
        treatment_arm: [String] = [],
        race: [String] = [],
        sex: [String] = [],
        disease_phase: [String] = [],
        ae_outcome: [String] = [],
        ae_grade: [String] = [],
        disease_site: [String] = [],
        fileType: [String] = [],
        cancer: [String] = []
    ): [GroupCount] @cypher(statement: """
        MATCH (sc: Subject_Characteristics_Table)
            WITH COLLECT(DISTINCT sc.STUDY_ID) AS groups
        MATCH (sc: Subject_Characteristics_Table)
            WHERE
                (size($pcdc_subject_id) = 0 OR $pcdc_subject_id IS NULL OR sc.PCDC_SUBJECT_ID IN $pcdc_subject_id) AND
                (size($data_contributor_id) = 0 OR $data_contributor_id IS NULL OR sc.DATA_CONTRIBUTOR_ID IN $data_contributor_id) AND
                (size($study_id) = 0 OR $study_id IS NULL OR sc.STUDY_ID IN $study_id) AND
                (size($treatment_arm) = 0 OR $treatment_arm IS NULL OR sc.TREATMENT_ARM IN $treatment_arm)
        OPTIONAL MATCH (demo: Demographics_Table)-->(sc)
            WHERE
                (size($race) = 0 OR $race IS NULL OR demo.RACE IN $race) AND
                (size($sex) = 0 OR $sex IS NULL OR demo.SEX IN $sex)
        OPTIONAL MATCH (dpt: Disease_Phase_Timing_Table)-->(sc)
            WHERE
                (size($disease_phase) = 0 OR $disease_phase IS NULL OR dpt.DISEASE_PHASE IN $disease_phase)
        OPTIONAL MATCH (ae: Adverse_Events_Table)-->(sc)
            WHERE
                (size($ae_outcome) = 0 OR $ae_outcome IS NULL OR ae.AE_OUTCOME IN $ae_outcome) AND
                (size($ae_grade) = 0 OR $ae_grade IS NULL OR ae.AE_GRADE IN $ae_grade)
        OPTIONAL MATCH (dct: Disease_Characteristics_Table)-->(sc)
            WHERE
                (size($disease_site) = 0 OR $disease_site IS NULL OR dct.DISEASE_SITE IN $disease_site)
        OPTIONAL MATCH (f: File)-->(sc)
            WHERE
                (size($fileType) = 0 OR $fileType IS NULL OR f.FILE_TYPE IN $fileType)
        OPTIONAL MATCH (p: Program)<--(s: Study)<--(sc)
            WHERE
                (size($cancer) = 0 OR $cancer IS NULL OR p.Cancer IN $cancer)
        WITH DISTINCT sc, groups
        WITH sc.STUDY_ID AS count_group,
             count(sc) AS count,
             groups
        UNWIND groups AS group
        RETURN {
            group: group,
            subjects: SUM(CASE count_group WHEN group THEN count ELSE 0 END)
        }   
    """, passThrough: true)

    filterSubjectCountByTreatmentArm (
        pcdc_subject_id: [String] = [],
        data_contributor_id: [String] = [],
        study_id: [String] = [],
        treatment_arm: [String] = [],
        race: [String] = [],
        sex: [String] = [],
        disease_phase: [String] = [],
        ae_outcome: [String] = [],
        ae_grade: [String] = [],
        disease_site: [String] = [],
        fileType: [String] = [],
        cancer: [String] = []
    ): [GroupCount] @cypher(statement: """
        MATCH (sc:Subject_Characteristics_Table)
            WITH COLLECT(DISTINCT sc.TREATMENT_ARM) AS groups
        MATCH (sc:Subject_Characteristics_Table)
            WHERE
                (size($pcdc_subject_id) = 0 OR $pcdc_subject_id IS NULL OR sc.PCDC_SUBJECT_ID IN $pcdc_subject_id) AND
                (size($data_contributor_id) = 0 OR $data_contributor_id IS NULL OR sc.DATA_CONTRIBUTOR_ID IN $data_contributor_id) AND
                (size($study_id) = 0 OR $study_id IS NULL OR sc.STUDY_ID IN $study_id)
        OPTIONAL MATCH (demo: Demographics_Table)-->(sc)
            WHERE
                (size($race) = 0 OR $race IS NULL OR demo.RACE IN $race) AND
                (size($sex) = 0 OR $sex IS NULL OR demo.SEX IN $sex)
        OPTIONAL MATCH (dpt: Disease_Phase_Timing_Table)-->(sc)
            WHERE
                (size($disease_phase) = 0 OR $disease_phase IS NULL OR dpt.DISEASE_PHASE IN $disease_phase)
        OPTIONAL MATCH (ae: Adverse_Events_Table)-->(sc)
            WHERE
                (size($ae_outcome) = 0 OR $ae_outcome IS NULL OR ae.AE_OUTCOME IN $ae_outcome) AND
                (size($ae_grade) = 0 OR $ae_grade IS NULL OR ae.AE_GRADE IN $ae_grade)
        OPTIONAL MATCH (dct: Disease_Characteristics_Table)-->(sc)
            WHERE
                (size($disease_site) = 0 OR $disease_site IS NULL OR dct.DISEASE_SITE IN $disease_site)
        OPTIONAL MATCH (f: File)-->(sc)
            WHERE
                (size($fileType) = 0 OR $fileType IS NULL OR f.FILE_TYPE IN $fileType)
        OPTIONAL MATCH (p: Program)<--(s: Study)<--(sc)
            WHERE
                (size($cancer) = 0 OR $cancer IS NULL OR p.Cancer IN $cancer)
        WITH DISTINCT sc, groups
        WITH sc.TREATMENT_ARM AS count_group,
             count(sc) AS count,
             groups
        UNWIND groups AS group
        RETURN {
            group: group,
            subjects: SUM(CASE count_group WHEN group THEN count ELSE 0 END)
        }
    """, passThrough: true)

    filterSubjectCountByRace (
        pcdc_subject_id: [String] = [],
        data_contributor_id: [String] = [],
        study_id: [String] = [],
        treatment_arm: [String] = [],
        race: [String] = [],
        sex: [String] = [],
        disease_phase: [String] = [],
        ae_outcome: [String] = [],
        ae_grade: [String] = [],
        disease_site: [String] = [],
        fileType: [String] = [],
        cancer: [String] = []
    ): [GroupCount] @cypher(statement: """
        MATCH (demo: Demographics_Table)
            WITH COLLECT(DISTINCT demo.RACE) AS groups
        MATCH (demo: Demographics_Table)-->(sc:Subject_Characteristics_Table)
            WHERE
                (size($pcdc_subject_id) = 0 OR $pcdc_subject_id IS NULL OR sc.PCDC_SUBJECT_ID IN $pcdc_subject_id) AND
                (size($data_contributor_id) = 0 OR $data_contributor_id IS NULL OR sc.DATA_CONTRIBUTOR_ID IN $data_contributor_id) AND
                (size($study_id) = 0 OR $study_id IS NULL OR sc.STUDY_ID IN $study_id) AND
                (size($treatment_arm) = 0 OR $treatment_arm IS NULL OR sc.TREATMENT_ARM IN $treatment_arm) AND
                (size($sex) = 0 OR $sex IS NULL OR demo.SEX IN $sex)
        OPTIONAL MATCH (dpt: Disease_Phase_Timing_Table)-->(sc)
            WHERE
                (size($disease_phase) = 0 OR $disease_phase IS NULL OR dpt.DISEASE_PHASE IN $disease_phase)
        OPTIONAL MATCH (ae: Adverse_Events_Table)-->(sc)
            WHERE
                (size($ae_outcome) = 0 OR $ae_outcome IS NULL OR ae.AE_OUTCOME IN $ae_outcome) AND
                (size($ae_grade) = 0 OR $ae_grade IS NULL OR ae.AE_GRADE IN $ae_grade)
        OPTIONAL MATCH (dct: Disease_Characteristics_Table)-->(sc)
            WHERE
                (size($disease_site) = 0 OR $disease_site IS NULL OR dct.DISEASE_SITE IN $disease_site)
        OPTIONAL MATCH (f: File)-->(sc)
            WHERE
                (size($fileType) = 0 OR $fileType IS NULL OR f.FILE_TYPE IN $fileType)
        OPTIONAL MATCH (p: Program)<--(s: Study)<--(sc)
            WHERE
                (size($cancer) = 0 OR $cancer IS NULL OR p.Cancer IN $cancer)
        WITH DISTINCT sc, demo, groups
        WITH demo.RACE AS count_group,
             count(sc) AS count,
             groups
        UNWIND groups AS group
        RETURN {
            group: group,
            subjects: SUM(CASE count_group WHEN group THEN count ELSE 0 END)
        }
    """, passThrough: true)

    filterSubjectCountBySex (
        pcdc_subject_id: [String] = [],
        data_contributor_id: [String] = [],
        study_id: [String] = [],
        treatment_arm: [String] = [],
        race: [String] = [],
        sex: [String] = [],
        disease_phase: [String] = [],
        ae_outcome: [String] = [],
        ae_grade: [String] = [],
        disease_site: [String] = [],
        fileType: [String] = [],
        cancer: [String] = []
    ): [GroupCount] @cypher(statement: """
        MATCH (demo: Demographics_Table)
            WITH COLLECT(DISTINCT demo.SEX) AS groups
        MATCH (demo: Demographics_Table)-->(sc:Subject_Characteristics_Table)
            WHERE
                (size($pcdc_subject_id) = 0 OR $pcdc_subject_id IS NULL OR sc.PCDC_SUBJECT_ID IN $pcdc_subject_id) AND
                (size($data_contributor_id) = 0 OR $data_contributor_id IS NULL OR sc.DATA_CONTRIBUTOR_ID IN $data_contributor_id) AND
                (size($study_id) = 0 OR $study_id IS NULL OR sc.STUDY_ID IN $study_id) AND
                (size($treatment_arm) = 0 OR $treatment_arm IS NULL OR sc.TREATMENT_ARM IN $treatment_arm) AND
                (size($race) = 0 OR $race IS NULL OR demo.RACE IN $race)
        OPTIONAL MATCH (dpt: Disease_Phase_Timing_Table)-->(sc)
            WHERE
                (size($disease_phase) = 0 OR $disease_phase IS NULL OR dpt.DISEASE_PHASE IN $disease_phase)
        OPTIONAL MATCH (ae: Adverse_Events_Table)-->(sc)
            WHERE
                (size($ae_outcome) = 0 OR $ae_outcome IS NULL OR ae.AE_OUTCOME IN $ae_outcome) AND
                (size($ae_grade) = 0 OR $ae_grade IS NULL OR ae.AE_GRADE IN $ae_grade)
        OPTIONAL MATCH (dct: Disease_Characteristics_Table)-->(sc)
            WHERE
                (size($disease_site) = 0 OR $disease_site IS NULL OR dct.DISEASE_SITE IN $disease_site)
        OPTIONAL MATCH (f: File)-->(sc)
            WHERE
                (size($fileType) = 0 OR $fileType IS NULL OR f.FILE_TYPE IN $fileType)
        OPTIONAL MATCH (p: Program)<--(s: Study)<--(sc)
            WHERE
                (size($cancer) = 0 OR $cancer IS NULL OR p.Cancer IN $cancer)
        WITH DISTINCT sc, demo, groups
        WITH demo.SEX AS count_group,
             count(sc) AS count,
             groups
        UNWIND groups AS group
        RETURN {
            group: group,
            subjects: SUM(CASE count_group WHEN group THEN count ELSE 0 END)
        }
    """, passThrough: true)

    filterSubjectCountByDiseasePhase (
        pcdc_subject_id: [String] = [],
        data_contributor_id: [String] = [],
        study_id: [String] = [],
        treatment_arm: [String] = [],
        race: [String] = [],
        sex: [String] = [],
        disease_phase: [String] = [],
        ae_outcome: [String] = [],
        ae_grade: [String] = [],
        disease_site: [String] = [],
        fileType: [String] = [],
        cancer: [String] = []
    ): [GroupCount] @cypher(statement: """
        MATCH (dpt: Disease_Phase_Timing_Table)
            WITH COLLECT(DISTINCT dpt.DISEASE_PHASE) AS groups
        MATCH (dpt: Disease_Phase_Timing_Table)-->(sc:Subject_Characteristics_Table)
            WHERE
                (size($pcdc_subject_id) = 0 OR $pcdc_subject_id IS NULL OR sc.PCDC_SUBJECT_ID IN $pcdc_subject_id) AND
                (size($data_contributor_id) = 0 OR $data_contributor_id IS NULL OR sc.DATA_CONTRIBUTOR_ID IN $data_contributor_id) AND
                (size($study_id) = 0 OR $study_id IS NULL OR sc.STUDY_ID IN $study_id) AND
                (size($treatment_arm) = 0 OR $treatment_arm IS NULL OR sc.TREATMENT_ARM IN $treatment_arm)
        OPTIONAL MATCH (demo: Demographics_Table)-->(sc)
            WHERE
                (size($race) = 0 OR $race IS NULL OR demo.RACE IN $race) AND
                (size($sex) = 0 OR $sex IS NULL OR demo.SEX IN $sex)
        OPTIONAL MATCH (ae: Adverse_Events_Table)-->(sc)
            WHERE
                (size($ae_outcome) = 0 OR $ae_outcome IS NULL OR ae.AE_OUTCOME IN $ae_outcome) AND
                (size($ae_grade) = 0 OR $ae_grade IS NULL OR ae.AE_GRADE IN $ae_grade)
        OPTIONAL MATCH (dct: Disease_Characteristics_Table)-->(sc)
            WHERE
                (size($disease_site) = 0 OR $disease_site IS NULL OR dct.DISEASE_SITE IN $disease_site)
        OPTIONAL MATCH (f: File)-->(sc)
            WHERE
                (size($fileType) = 0 OR $fileType IS NULL OR f.FILE_TYPE IN $fileType)
        OPTIONAL MATCH (p: Program)<--(s: Study)<--(sc)
            WHERE
                (size($cancer) = 0 OR $cancer IS NULL OR p.Cancer IN $cancer)
        WITH DISTINCT sc, dpt, groups
        WITH dpt.DISEASE_PHASE AS count_group,
             count(sc) AS count,
             groups
        UNWIND groups AS group
        RETURN {
            group: group,
            subjects: SUM(CASE count_group WHEN group THEN count ELSE 0 END)
        }
    """, passThrough: true)

    filterSubjectCountByAEOutcome (
        pcdc_subject_id: [String] = [],
        data_contributor_id: [String] = [],
        study_id: [String] = [],
        treatment_arm: [String] = [],
        race: [String] = [],
        sex: [String] = [],
        disease_phase: [String] = [],
        ae_outcome: [String] = [],
        ae_grade: [String] = [],
        disease_site: [String] = [],
        fileType: [String] = [],
        cancer: [String] = []
    ): [GroupCount] @cypher(statement: """
        MATCH (ae: Adverse_Events_Table)
            WITH COLLECT(DISTINCT ae.AE_OUTCOME) AS groups
        MATCH (ae: Adverse_Events_Table)-->(sc:Subject_Characteristics_Table)
            WHERE
                (size($pcdc_subject_id) = 0 OR $pcdc_subject_id IS NULL OR sc.PCDC_SUBJECT_ID IN $pcdc_subject_id) AND
                (size($data_contributor_id) = 0 OR $data_contributor_id IS NULL OR sc.DATA_CONTRIBUTOR_ID IN $data_contributor_id) AND
                (size($study_id) = 0 OR $study_id IS NULL OR sc.STUDY_ID IN $study_id) AND
                (size($treatment_arm) = 0 OR $treatment_arm IS NULL OR sc.TREATMENT_ARM IN $treatment_arm) AND
                (size($ae_grade) = 0 OR $ae_grade IS NULL OR ae.AE_GRADE IN $ae_grade)
        OPTIONAL MATCH (demo: Demographics_Table)-->(sc)
            WHERE
                (size($race) = 0 OR $race IS NULL OR demo.RACE IN $race) AND
                (size($sex) = 0 OR $sex IS NULL OR demo.SEX IN $sex)
        OPTIONAL MATCH (dpt: Disease_Phase_Timing_Table)-->(sc)
            WHERE
                (size($disease_phase) = 0 OR $disease_phase IS NULL OR dpt.DISEASE_PHASE IN $disease_phase)
        OPTIONAL MATCH (dct: Disease_Characteristics_Table)-->(sc)
            WHERE
                (size($disease_site) = 0 OR $disease_site IS NULL OR dct.DISEASE_SITE IN $disease_site)
        OPTIONAL MATCH (f: File)-->(sc)
            WHERE
                (size($fileType) = 0 OR $fileType IS NULL OR f.FILE_TYPE IN $fileType)
        OPTIONAL MATCH (p: Program)<--(s: Study)<--(sc)
            WHERE
                (size($cancer) = 0 OR $cancer IS NULL OR p.Cancer IN $cancer)
        WITH DISTINCT sc, ae, groups
        WITH ae.AE_OUTCOME AS count_group,
             count(sc) AS count,
             groups
        UNWIND groups AS group
        RETURN {
            group: group,
            subjects: SUM(CASE count_group WHEN group THEN count ELSE 0 END)
        }
    """, passThrough: true)

    filterSubjectCountByAEGrade (
        pcdc_subject_id: [String] = [],
        data_contributor_id: [String] = [],
        study_id: [String] = [],
        treatment_arm: [String] = [],
        race: [String] = [],
        sex: [String] = [],
        disease_phase: [String] = [],
        ae_outcome: [String] = [],
        ae_grade: [String] = [],
        disease_site: [String] = [],
        fileType: [String] = [],
        cancer: [String] = []
    ): [GroupCount] @cypher(statement: """
        MATCH (ae: Adverse_Events_Table)
            WITH COLLECT(DISTINCT ae.AE_GRADE) AS groups
        MATCH (ae: Adverse_Events_Table)-->(sc:Subject_Characteristics_Table)
            WHERE
                (size($pcdc_subject_id) = 0 OR $pcdc_subject_id IS NULL OR sc.PCDC_SUBJECT_ID IN $pcdc_subject_id) AND
                (size($data_contributor_id) = 0 OR $data_contributor_id IS NULL OR sc.DATA_CONTRIBUTOR_ID IN $data_contributor_id) AND
                (size($study_id) = 0 OR $study_id IS NULL OR sc.STUDY_ID IN $study_id) AND
                (size($treatment_arm) = 0 OR $treatment_arm IS NULL OR sc.TREATMENT_ARM IN $treatment_arm) AND
                (size($ae_outcome) = 0 OR $ae_outcome IS NULL OR ae.AE_OUTCOME IN $ae_outcome)
        OPTIONAL MATCH (demo: Demographics_Table)-->(sc)
            WHERE
                (size($race) = 0 OR $race IS NULL OR demo.RACE IN $race) AND
                (size($sex) = 0 OR $sex IS NULL OR demo.SEX IN $sex)
        OPTIONAL MATCH (dpt: Disease_Phase_Timing_Table)-->(sc)
            WHERE
                (size($disease_phase) = 0 OR $disease_phase IS NULL OR dpt.DISEASE_PHASE IN $disease_phase)
        OPTIONAL MATCH (dct: Disease_Characteristics_Table)-->(sc)
            WHERE
                (size($disease_site) = 0 OR $disease_site IS NULL OR dct.DISEASE_SITE IN $disease_site)
        OPTIONAL MATCH (f: File)-->(sc)
            WHERE
                (size($fileType) = 0 OR $fileType IS NULL OR f.FILE_TYPE IN $fileType)
        OPTIONAL MATCH (p: Program)<--(s: Study)<--(sc)
            WHERE
                (size($cancer) = 0 OR $cancer IS NULL OR p.Cancer IN $cancer)
        WITH DISTINCT sc, ae, groups
        WITH ae.AE_GRADE AS count_group,
             count(sc) AS count,
             groups
        UNWIND groups AS group
        RETURN {
            group: group,
            subjects: SUM(CASE count_group WHEN group THEN count ELSE 0 END)
        }
    """, passThrough: true)

    filterSubjectCountByDiseaseSite (
        pcdc_subject_id: [String] = [],
        data_contributor_id: [String] = [],
        study_id: [String] = [],
        treatment_arm: [String] = [],
        race: [String] = [],
        sex: [String] = [],
        disease_phase: [String] = [],
        ae_outcome: [String] = [],
        ae_grade: [String] = [],
        disease_site: [String] = [],
        fileType: [String] = [],
        cancer: [String] = []
    ): [GroupCount] @cypher(statement: """
        MATCH (dct: Disease_Characteristics_Table)
            WITH COLLECT(DISTINCT dct.DISEASE_SITE) AS groups
        MATCH (dct: Disease_Characteristics_Table)-->(sc:Subject_Characteristics_Table)
            WHERE
                (size($pcdc_subject_id) = 0 OR $pcdc_subject_id IS NULL OR sc.PCDC_SUBJECT_ID IN $pcdc_subject_id) AND
                (size($data_contributor_id) = 0 OR $data_contributor_id IS NULL OR sc.DATA_CONTRIBUTOR_ID IN $data_contributor_id) AND
                (size($study_id) = 0 OR $study_id IS NULL OR sc.STUDY_ID IN $study_id) AND
                (size($treatment_arm) = 0 OR $treatment_arm IS NULL OR sc.TREATMENT_ARM IN $treatment_arm)
        OPTIONAL MATCH (demo: Demographics_Table)-->(sc)
            WHERE
                (size($race) = 0 OR $race IS NULL OR demo.RACE IN $race) AND
                (size($sex) = 0 OR $sex IS NULL OR demo.SEX IN $sex)
        OPTIONAL MATCH (dpt: Disease_Phase_Timing_Table)-->(sc)
            WHERE
                (size($disease_phase) = 0 OR $disease_phase IS NULL OR dpt.DISEASE_PHASE IN $disease_phase)
        OPTIONAL MATCH (ae: Adverse_Events_Table)-->(sc)
            WHERE
                (size($ae_outcome) = 0 OR $ae_outcome IS NULL OR ae.AE_OUTCOME IN $ae_outcome) AND
                (size($ae_grade) = 0 OR $ae_grade IS NULL OR ae.AE_GRADE IN $ae_grade)
        OPTIONAL MATCH (f: File)-->(sc)
            WHERE
                (size($fileType) = 0 OR $fileType IS NULL OR f.FILE_TYPE IN $fileType)
        OPTIONAL MATCH (p: Program)<--(s: Study)<--(sc)
            WHERE
                (size($cancer) = 0 OR $cancer IS NULL OR p.Cancer IN $cancer)
        WITH DISTINCT sc, dct, groups
        WITH dct.DISEASE_SITE AS count_group,
             count(sc) AS count,
             groups
        UNWIND groups AS group
        RETURN {
            group: group,
            subjects: SUM(CASE count_group WHEN group THEN count ELSE 0 END)
        }
    """, passThrough: true)

    filterSubjectCountByFileType (
        pcdc_subject_id: [String] = [],
        data_contributor_id: [String] = [],
        study_id: [String] = [],
        treatment_arm: [String] = [],
        race: [String] = [],
        sex: [String] = [],
        disease_phase: [String] = [],
        ae_outcome: [String] = [],
        ae_grade: [String] = [],
        disease_site: [String] = [],
        fileType: [String] = [],
        cancer: [String] = []
    ): [GroupCount] @cypher(statement: """
        MATCH (f: File)
            WITH COLLECT(DISTINCT f.FILE_TYPE) AS groups
        MATCH (f: File)-->(sc:Subject_Characteristics_Table)
            WHERE
                (size($pcdc_subject_id) = 0 OR $pcdc_subject_id IS NULL OR sc.PCDC_SUBJECT_ID IN $pcdc_subject_id) AND
                (size($data_contributor_id) = 0 OR $data_contributor_id IS NULL OR sc.DATA_CONTRIBUTOR_ID IN $data_contributor_id) AND
                (size($study_id) = 0 OR $study_id IS NULL OR sc.STUDY_ID IN $study_id) AND
                (size($treatment_arm) = 0 OR $treatment_arm IS NULL OR sc.TREATMENT_ARM IN $treatment_arm)
        OPTIONAL MATCH (demo: Demographics_Table)-->(sc)
            WHERE
                (size($race) = 0 OR $race IS NULL OR demo.RACE IN $race) AND
                (size($sex) = 0 OR $sex IS NULL OR demo.SEX IN $sex)
        OPTIONAL MATCH (dpt: Disease_Phase_Timing_Table)-->(sc)
            WHERE
                (size($disease_phase) = 0 OR $disease_phase IS NULL OR dpt.DISEASE_PHASE IN $disease_phase)
        OPTIONAL MATCH (ae: Adverse_Events_Table)-->(sc)
            WHERE
                (size($ae_outcome) = 0 OR $ae_outcome IS NULL OR ae.AE_OUTCOME IN $ae_outcome) AND
                (size($ae_grade) = 0 OR $ae_grade IS NULL OR ae.AE_GRADE IN $ae_grade)
        OPTIONAL MATCH (dct: Disease_Characteristics_Table)-->(sc)
            WHERE
                (size($disease_site) = 0 OR $disease_site IS NULL OR dct.DISEASE_SITE IN $disease_site)
        OPTIONAL MATCH (p: Program)<--(s: Study)<--(sc)
            WHERE
                (size($cancer) = 0 OR $cancer IS NULL OR p.Cancer IN $cancer)
        WITH DISTINCT sc, f, groups
        WITH f.FILE_TYPE AS count_group,
             count(sc) AS count,
             groups
        UNWIND groups AS group
        RETURN {
            group: group,
            subjects: SUM(CASE count_group WHEN group THEN count ELSE 0 END)
        }
    """, passThrough: true)

    filterSubjectCountByCancer (
        pcdc_subject_id: [String] = [],
        data_contributor_id: [String] = [],
        study_id: [String] = [],
        treatment_arm: [String] = [],
        race: [String] = [],
        sex: [String] = [],
        disease_phase: [String] = [],
        ae_outcome: [String] = [],
        ae_grade: [String] = [],
        disease_site: [String] = [],
        fileType: [String] = [],
        cancer: [String] = []
    ): [GroupCount] @cypher(statement: """
        MATCH (p: Program)
            WITH COLLECT(DISTINCT p.Cancer) AS groups
        MATCH (p: Program)<--(s: Study)<--(sc:Subject_Characteristics_Table)
            WHERE
                (size($pcdc_subject_id) = 0 OR $pcdc_subject_id IS NULL OR sc.PCDC_SUBJECT_ID IN $pcdc_subject_id) AND
                (size($data_contributor_id) = 0 OR $data_contributor_id IS NULL OR sc.DATA_CONTRIBUTOR_ID IN $data_contributor_id) AND
                (size($study_id) = 0 OR $study_id IS NULL OR sc.STUDY_ID IN $study_id) AND
                (size($treatment_arm) = 0 OR $treatment_arm IS NULL OR sc.TREATMENT_ARM IN $treatment_arm)
        OPTIONAL MATCH (demo: Demographics_Table)-->(sc)
            WHERE
                (size($race) = 0 OR $race IS NULL OR demo.RACE IN $race) AND
                (size($sex) = 0 OR $sex IS NULL OR demo.SEX IN $sex)
        OPTIONAL MATCH (dpt: Disease_Phase_Timing_Table)-->(sc)
            WHERE
                (size($disease_phase) = 0 OR $disease_phase IS NULL OR dpt.DISEASE_PHASE IN $disease_phase)
        OPTIONAL MATCH (ae: Adverse_Events_Table)-->(sc)
            WHERE
                (size($ae_outcome) = 0 OR $ae_outcome IS NULL OR ae.AE_OUTCOME IN $ae_outcome) AND
                (size($ae_grade) = 0 OR $ae_grade IS NULL OR ae.AE_GRADE IN $ae_grade)
        OPTIONAL MATCH (dct: Disease_Characteristics_Table)-->(sc)
            WHERE
                (size($disease_site) = 0 OR $disease_site IS NULL OR dct.DISEASE_SITE IN $disease_site)
        OPTIONAL MATCH (f: File)-->(sc)
            WHERE
                (size($fileType) = 0 OR $fileType IS NULL OR f.FILE_TYPE IN $fileType)
        WITH DISTINCT sc, p, groups
        WITH p.Cancer AS count_group,
             count(sc) AS count,
             groups
        UNWIND groups AS group
        RETURN {
            group: group,
            subjects: SUM(CASE count_group WHEN group THEN count ELSE 0 END)
        }
    """, passThrough: true)

    searchSubjects(
        pcdc_subject_id: [String] = [],
        data_contributor_id: [String] = [],
        study_id: [String] = [],
        treatment_arm: [String] = [],
        race: [String] = [],
        sex: [String] = [],
        disease_phase: [String] = [],
        ae_outcome: [String] = [],
        ae_grade: [String] = [],
        disease_site: [String] = [],
        fileType: [String] = [],
        cancer: [String] = []
    ): SearchResult @cypher(statement: """
        MATCH (demo: Demographics_Table)-->(sc:Subject_Characteristics_Table), (dpt: Disease_Phase_Timing_Table)-->(sc), (ae: Adverse_Events_Table)-->(sc), (dct: Disease_Characteristics_Table)-->(sc), (f: File)-->(sc), (p: Program)<--(s: Study)<--(sc)
            WHERE
                (size($pcdc_subject_id) = 0 OR $pcdc_subject_id IS NULL OR sc.PCDC_SUBJECT_ID IN $pcdc_subject_id) AND
                (size($data_contributor_id) = 0 OR $data_contributor_id IS NULL OR sc.DATA_CONTRIBUTOR_ID IN $data_contributor_id) AND
                (size($study_id) = 0 OR $study_id IS NULL OR sc.STUDY_ID IN $study_id) AND
                (size($treatment_arm) = 0 OR $treatment_arm IS NULL OR sc.TREATMENT_ARM IN $treatment_arm) AND
                (size($race) = 0 OR $race IS NULL OR demo.RACE IN $race) AND
                (size($sex) = 0 OR $sex IS NULL OR demo.SEX IN $sex) AND
                (size($disease_phase) = 0 OR $disease_phase IS NULL OR dpt.DISEASE_PHASE IN $disease_phase) AND
                (size($ae_outcome) = 0 OR $ae_outcome IS NULL OR ae.AE_OUTCOME IN $ae_outcome) AND
                (size($ae_grade) = 0 OR $ae_grade IS NULL OR ae.AE_GRADE IN $ae_grade) AND
                (size($disease_site) = 0 OR $disease_site IS NULL OR dct.DISEASE_SITE IN $disease_site) AND
                (size($fileType) = 0 OR $fileType IS NULL OR f.FILE_TYPE IN $fileType) AND
                (size($cancer) = 0 OR $cancer IS NULL OR p.Cancer IN $cancer)
        RETURN{
            numOfPrograms: COUNT(DISTINCT p),
            numberOfSubjects: COUNT(DISTINCT sc),
            num_of_studies: COUNT(DISTINCT s),
            numberOfFiles: COUNT(DISTINCT f),
            fileIds: COLLECT(DISTINCT f.UUID),
            subjectIds: COLLECT(DISTINCT sc.PCDC_SUBJECT_ID)
        }
    """, passThrough: true)
}